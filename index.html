<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Image Generator Bot (Webç‰ˆ)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <h1>ğŸ¨ Image Generator Bot</h1>
    <p>è¾“å…¥æŒ‡ä»¤ï¼ˆæ”¯æŒ: <code>!ping</code>, <code>!imagine prompt</code>ï¼‰</p>
    <input id="command" type="text" placeholder="è¾“å…¥å‘½ä»¤...">
    <button id="run">è¿è¡Œ</button>
    <div id="output"></div>
  </div>

  <script>
    document.getElementById('run').addEventListener('click', async () => {
      const cmd = document.getElementById('command').value.trim();
      const output = document.getElementById('output');

      if (!cmd) {
        output.textContent = "âŒ è¯·è¾“å…¥å‘½ä»¤";
        return;
      }

      if (cmd.startsWith('!ping')) {
        const res = await fetch('/api/ping');
        const data = await res.json();
        output.textContent = data.message;
      } else if (cmd.startsWith('!imagine')) {
        const prompt = cmd.replace('!imagine', '').trim();
        const res = await fetch('/api/imagine?prompt=' + encodeURIComponent(prompt));
        const data = await res.json();
        if (data.image) {
          output.innerHTML = `
            <p>ğŸ–¼ï¸ ç”Ÿæˆçš„å›¾åƒ: <strong>${prompt}</strong></p>
            <img src="${data.image}" alt="ç”Ÿæˆçš„å›¾åƒ" style="max-width:100%; border-radius:8px; margin-top:1rem;">
          `;
        } else {
          output.textContent = "âš ï¸ å›¾åƒç”Ÿæˆå¤±è´¥: " + (data.error || "æœªçŸ¥é”™è¯¯");
        }
      } else {
        output.textContent = "âŒ æœªçŸ¥å‘½ä»¤";
      }
    });
  </script>
</body>
</html>
